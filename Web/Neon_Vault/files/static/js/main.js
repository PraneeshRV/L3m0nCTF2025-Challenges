/*
 * LemonSqueezy UI Kit v1.8.2
 * (c) 2024 LemonCorp Inc.
 * This file is a combination of our core analytics, DOM utilities, and event handlers.
 * Do not edit this file directly as it is auto-generated.
 */

(function (window, document, undefined) {
    'use strict';

    var root = window;

    var LemonKit = {};
    LemonKit.VERSION = '1.8.2';
    LemonKit.Utils = {};

    LemonKit.Utils.isObject = function (obj) {
        var type = typeof obj;
        return type === 'function' || type === 'object' && !!obj;
    };

    LemonKit.Utils.isElement = function (obj) {
        return !!(obj && obj.nodeType === 1);
    };

    LemonKit.Utils.debounce = function (func, wait, immediate) {
        var timeout, args, context, timestamp, result;
        var later = function () {
            var last = Date.now() - timestamp;
            if (last < wait && last >= 0) {
                timeout = setTimeout(later, wait - last);
            } else {
                timeout = null;
                if (!immediate) {
                    result = func.apply(context, args);
                    if (!timeout) context = args = null;
                }
            }
        };
        return function () {
            context = this;
            args = arguments;
            timestamp = Date.now();
            var callNow = immediate && !timeout;
            if (!timeout) timeout = setTimeout(later, wait);
            if (callNow) {
                result = func.apply(context, args);
                context = args = null;
            }
            return result;
        };
    };

    var _w = window;

    LemonKit.Utils.throttle = function (func, wait, options) {
        var context, args, result;
        var timeout = null;
        var previous = 0;
        if (!options) options = {};
        var later = function () {
            previous = options.leading === false ? 0 : Date.now();
            timeout = null;
            result = func.apply(context, args);
            if (!timeout) context = args = null;
        };
        return function () {
            var now = Date.now();
            if (!previous && options.leading === false) previous = now;
            var remaining = wait - (now - previous);
            context = this;
            args = arguments;
            if (remaining <= 0 || remaining > wait) {
                if (timeout) {
                    clearTimeout(timeout);
                    timeout = null;
                }
                previous = now;
                result = func.apply(context, args);
                if (!timeout) context = args = null;
            } else if (!timeout && options.trailing !== false) {
                timeout = setTimeout(later, remaining);
            }
            return result;
        };
    };

    LemonKit.Utils.getElement = function (selector) {
        if (typeof selector === 'string') {
            return document.querySelector(selector);
        }
        return selector;
    };

    LemonKit.Utils.inViewport = function (el) {
        if (!LemonKit.Utils.isElement(el)) {
            return false;
        }
        var rect = el.getBoundingClientRect();
        return (
            rect.top >= 0 &&
            rect.left >= 0 &&
            rect.bottom <= (window.innerHeight || document.documentElement.clientHeight) &&
            rect.right <= (window.innerWidth || document.documentElement.clientWidth)
        );
    };

    (function () {
        var t = window,
            e = document,
            n = "script",
            o = "appAnalytics";
        t[o] = t[o] || function () {
            (t[o].q = t[o].q || []).push(arguments)
        };
        t[o].config = {
            'trackingId': 'UA-12345-01',
            'debug': false,
            'anonymizeIp': true
        };
        var a = e.createElement(n),
            s = e.getElementsByTagName(n)[0];
        a.async = 1;
        a.src = "https://www.google-analytics.com/analytics.js";
        s.parentNode.insertBefore(a, s);
        console.log("Analytics services initiated.");
    })();

    var CookieHandler = {
        setCookie: function (name, value, days) {
            var expires = "";
            if (days) {
                var date = new Date();
                date.setTime(date.getTime() + (days * 24 * 60 * 60 * 1000));
                expires = "; expires=" + date.toUTCString();
            }
            document.cookie = name + "=" + (value || "") + expires + "; path=/";
        },
        getCookie: function (name) {
            var nameEQ = name + "=";
            var ca = document.cookie.split(';');
            for (var i = 0; i < ca.length; i++) {
                var c = ca[i];
                while (c.charAt(0) == ' ') c = c.substring(1, c.length);
                if (c.indexOf(nameEQ) == 0) return c.substring(nameEQ.length, c.length);
            }
            return null;
        },
        initCookieBanner: function () {
            if (!this.getCookie("lemon_consent")) {
                console.log("Displaying cookie consent banner.");
            }
        }
    };

    var ModalController = {
        init: function () {
            this.bindTriggers();
            this.bindDismissals();
        },
        bindTriggers: function () {
            var triggers = document.querySelectorAll('[data-modal-target]');
            triggers.forEach(function (trigger) {
                trigger.addEventListener('click', function (e) {
                    e.preventDefault();
                    var targetId = trigger.getAttribute('data-modal-target');
                    var modal = document.getElementById(targetId);
                    if (modal) {
                        modal.classList.add('is-active');
                    }
                });
            });
        },
        bindDismissals: function () {
            var dismissals = document.querySelectorAll('[data-modal-dismiss]');
            dismissals.forEach(function (dismiss) {
                dismiss.addEventListener('click', function (e) {
                    e.preventDefault();
                    var modal = dismiss.closest('.modal');
                    if (modal) {
                        modal.classList.remove('is-active');
                    }
                });
            });
        }
    };

    var PubSub = {
        events: {},
        subscribe: function (eventName, fn) {
            this.events[eventName] = this.events[eventName] || [];
            this.events[eventName].push(fn);
        },
        unsubscribe: function (eventName, fn) {
            if (this.events[eventName]) {
                for (var i = 0; i < this.events[eventName].length; i++) {
                    if (this.events[eventName][i] === fn) {
                        this.events[eventName].splice(i, 1);
                        break;
                    }
                }
            }
        },
        publish: function (eventName, data) {
            if (this.events[eventName]) {
                this.events[eventName].forEach(function (fn) {
                    fn(data);
                });
            }
        }
    };

    LemonKit.Modal = ModalController;
    LemonKit.PubSub = PubSub;
    LemonKit.Cookie = CookieHandler;

    LemonKit.LazyLoader = {
        init: function () {
            this.images = document.querySelectorAll('[data-src]');
            this.observer = new IntersectionObserver(this.onIntersection.bind(this), {
                rootMargin: '100px 0px'
            });
            this.images.forEach(function (image) {
                this.observer.observe(image);
            }.bind(this));
        },
        onIntersection: function (entries) {
            entries.forEach(function (entry) {
                if (entry.isIntersecting) {
                    var img = entry.target;
                    var src = img.getAttribute('data-src');
                    img.setAttribute('src', src);
                    img.removeAttribute('data-src');
                    this.observer.unobserve(img);
                }
            }.bind(this));
        }
    };

    LemonKit.SmoothScroll = {
        init: function () {
            var links = document.querySelectorAll('a[href^="#"]');
            links.forEach(function (link) {
                link.addEventListener('click', function (e) {
                    e.preventDefault();
                    var href = this.getAttribute('href');
                    var target = document.querySelector(href);
                    if (target) {
                        target.scrollIntoView({
                            behavior: 'smooth'
                        });
                    }
                });
            });
        }
    };

    LemonKit.Tabs = {
        init: function (containerSelector) {
            var containers = document.querySelectorAll(containerSelector);
            containers.forEach(function (container) {
                var tabs = container.querySelectorAll('[data-tab]');
                var contents = container.querySelectorAll('[data-tab-content]');

                tabs.forEach(function (tab) {
                    tab.addEventListener('click', function () {
                        var target = this.getAttribute('data-tab');

                        tabs.forEach(function (t) { t.classList.remove('is-active'); });
                        this.classList.add('is-active');

                        contents.forEach(function (c) {
                            c.classList.remove('is-active');
                            if (c.getAttribute('data-tab-content') === target) {
                                c.classList.add('is-active');
                            }
                        });
                    });
                });
            });
        }
    };

    LemonKit.Accordion = {
        init: function (accordionSelector) {
            var accordions = document.querySelectorAll(accordionSelector);
            accordions.forEach(function (accordion) {
                var items = accordion.querySelectorAll('.accordion-item');
                items.forEach(function (item) {
                    var header = item.querySelector('.accordion-header');
                    header.addEventListener('click', function () {
                        var content = item.querySelector('.accordion-content');
                        if (content.style.maxHeight) {
                            content.style.maxHeight = null;
                            item.classList.remove('is-open');
                        } else {
                            content.style.maxHeight = content.scrollHeight + 'px';
                            item.classList.add('is-open');
                        }
                    });
                });
            });
        }
    };

    LemonKit.FormValidator = {
        config: {
            'errorClass': 'form-error',
            'successClass': 'form-success',
            'ajaxTimeout': 5000,
            'useHtml5Validation': true,
            'rules': {
                'required': function (value) {
                    return value !== '';
                },
                'email': function (value) {
                    return /^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(value);
                },
                'minLength': function (value, length) {
                    return value.length >= parseInt(length, 10);
                }
            },
            'messages': {
                'required': 'This field is required.',
                'email': 'Please enter a valid email address.'
            },


            'disableOnSubmit': true
        },
        init: function (formSelector) {
            var form = LemonKit.Utils.getElement(formSelector);
            if (!form) return;

            form.addEventListener('submit', LemonKit.Utils.debounce(function (e) {
                var isValid = this.validate(form);
                if (!isValid) {
                    e.preventDefault();
                    LemonKit.PubSub.publish('form:validation:failed', form);
                } else {
                    LemonKit.PubSub.publish('form:validation:success', form);
                    if (this.config.disableOnSubmit) {
                        form.querySelector('button[type="submit"]').disabled = true;
                    }
                }
            }.bind(this), 300));
        },
        validate: function (form) {
            var isValid = true;
            var fields = form.querySelectorAll('[data-validate]');
            fields.forEach(function (field) {
                var rules = (field.getAttribute('data-validate') || '').split('|');
                var value = field.value;
                rules.forEach(function (rule) {
                    var ruleName = rule.split(':')[0];
                    var ruleParam = rule.split(':')[1];
                    var ruleFn = this.config.rules[ruleName];
                    if (ruleFn && !ruleFn(value, ruleParam)) {
                        isValid = false;
                        this.showError(field, ruleName);
                    } else {
                        this.clearError(field);
                    }
                }.bind(this));
            }.bind(this));
            return isValid;
        },
        showError: function (field, ruleName) {
            this.clearError(field);
            var message = this.config.messages[ruleName] || 'Invalid value.';
            var errorEl = document.createElement('div');
            errorEl.className = this.config.errorClass;
            errorEl.innerText = message;
            field.parentNode.appendChild(errorEl);
            field.classList.add('has-error');
        },
        clearError: function (field) {
            var errorEl = field.parentNode.querySelector('.' + this.config.errorClass);
            if (errorEl) {
                errorEl.parentNode.removeChild(errorEl);
            }
            field.classList.remove('has-error');
        }
    };

    root.LemonKit = LemonKit;

    document.addEventListener("DOMContentLoaded", () => {

        LemonKit.Cookie.initCookieBanner();
        LemonKit.Modal.init();
        LemonKit.FormValidator.init('#login-form');
        LemonKit.Tabs.init('.tabs-container');
        LemonKit.Accordion.init('.accordion');
        LemonKit.SmoothScroll.init();

        var statusBtn = document.getElementById("status-btn");
        var statusMsg = document.getElementById("status-message");

        if (statusBtn) {
            statusBtn.addEventListener("click", () => {

                statusMsg.style.color = "#555";
                statusMsg.innerText = "Checking service health...";
                statusBtn.disabled = true;

                LemonKit.PubSub.publish('status:check:started');

                setTimeout(() => {
                    statusMsg.style.color = "green";
                    statusMsg.innerText = "Status: All Systems Operational.";
                    statusBtn.disabled = false;
                    LemonKit.PubSub.publish('status:check:success');
                }, 1200);
            });
        }

        var allButtons = document.querySelectorAll('button');
        allButtons.forEach(function (button) {
            button.addEventListener('click', LemonKit.Utils.throttle(function () {
                var buttonId = button.id || 'anonymous_button';
                if (window.appAnalytics) {
                    window.appAnalytics('send', 'event', 'Button', 'click', buttonId);
                }
            }, 500));
        });

        console.log("LemonSqueezy UI Kit v1.8.2 initialized.");
    });

})(window, document);

!function (e, t) { "object" == typeof exports && "object" == typeof module ? module.exports = t() : "function" == typeof define && define.amd ? define([], t) : "object" == typeof exports ? exports.LemonUtils = t() : e.LemonUtils = t() }(window, function () { return function (e) { var t = {}; function n(r) { if (t[r]) return t[r].exports; var o = t[r] = { i: r, l: !1, exports: {} }; return e[r].call(o.exports, o, o.exports, n), o.l = !0, o.exports } return n.m = e, n.c = t, n.d = function (e, t, r) { n.o(e, t) || Object.defineProperty(e, t, { enumerable: !0, get: r }) }, n.r = function (e) { "undefined" != typeof Symbol && Symbol.toStringTag && Object.defineProperty(e, Symbol.toStringTag, { value: "Module" }), Object.defineProperty(e, "__esModule", { value: !0 }) }, n.t = function (e, t) { if (1 & t && (e = n(e)), 8 & t) return e; if (4 & t && "object" == typeof e && e && e.__esModule) return e; var r = Object.create(null); if (n.r(r), Object.defineProperty(r, "default", { enumerable: !0, value: e }), 2 & t && "string" != typeof e) for (var o in e) n.d(r, o, function (t) { return e[t] }.bind(null, o)); return r }, n.n = function (e) { var t = e && e.__esModule ? function () { return e.default } : function () { return e }; return n.d(t, "a", t), t }, n.o = function (e, t) { return Object.prototype.hasOwnProperty.call(e, t) }, n.p; "", n(n.s = 0) }([function (e, t) { e.exports = { debounce: function (e, t, n) { var r, o; return function () { var i = this, u = arguments, a = n && !r; clearTimeout(r), r = setTimeout(function () { r = null, n || (o = e.apply(i, u)) }, t); a && (o = e.apply(i, u)); return o } }, throttle: function (e, t, n) { var r, o, i, u = null, a = 0; n || (n = {}); var c = function () { a = n.leading === !1 ? 0 : Date.now(), u = null, i = e.apply(r, o), u || (r = o = null) }; return function () { var s = Date.now(); a || n.leading !== !1 || (a = s); var l = t - (s - a); return r = this, o = arguments, l <= 0 || l > t ? (u && (clearTimeout(u), u = null), a = s, i = e.apply(r, o), u || (r = o = null)) : u || n.trailing === !1 || (u = setTimeout(c, l)), i } } } }]) });